# Выбор локации для разработки месторождений

Проект посвящён анализу данных по трём нефтяным регионам и выбору локации для бурения скважин с максимальной ожидаемой прибылью при контроле риска убытков.  

---

## Цели исследования

- Изучить характеристики скважин в трёх регионах.  
- Построить модель для прогнозирования объёма добычи по данным геологоразведки.  
- Оценить прибыль от разработки регионов с учётом ограничений по бюджету и количеству скважин.  
- Применить бутстреп-оценивание для расчёта доверительных интервалов прибыли.  
- Выбрать регион для разработки, где ожидаемая прибыль максимальна, а риск убытка не превышает заданный порог.  

---

## Данные

Используются данные по трём регионам. Для каждого региона предоставлен отдельный датасет с одинаковой структурой.

Основные признаки:

- `id` — идентификатор скважины  
- `f0`, `f1`, `f2` — результаты геологоразведки (числовые признаки, характеризующие свойства месторождения)  
- `product` — объём запасов или прогнозируемая добыча (целевой признак)

Для каждого региона доступно по несколько тысяч записей, каждая запись соответствует потенциальной скважине.

Дополнительно в постановке задачи заданы:

- бюджет на разработку региона,  
- количество скважин, доступных для бурения,  
- количество лучших скважин, которые будут выбраны по прогнозу модели.

---

## Предобработка данных

Выполнены этапы:

- загрузка данных для трёх регионов;  
- проверка размеров таблиц и типов данных;  
- анализ пропусков и дубликатов (при необходимости — удаление или обработка);  
- переименование столбцов для удобства работы;  
- объединение информации по регионам в единую структуру для сравнительного анализа;  
- разделение признаков (f0–f2) и целевого признака (`product`) для обучения моделей.

---

## Исследовательский анализ данных (EDA)

Для каждого региона были изучены:

### Распределения целевого признака
- построены гистограммы распределений `product`;  
- оценены средние значения, медиана и разброс;  
- проведено сравнение регионов по среднему уровню добычи и вариативности.

### Связь признаков с целевым значением
- проанализированы зависимости между признаками `f0`, `f1`, `f2` и целевым признаком;  
- оценена линейность связей и наличие сильных выбросов;  
- вычислены корреляции (включая PHIK, если применялось) для оценки значимости признаков.

### Особенности регионов
- в одном из регионов выявлено подозрительно малое число уникальных значений целевого признака, что может говорить о специфике измерений или особенностях отбора точек;  
- отмечены различия в распределениях признаков и целевого значения между регионами, что будет влиять на устойчивость прогнозов и итоговую прибыль.

---

## Моделирование

Для каждого региона была построена отдельная модель линейной регрессии:

- признаки: `f0`, `f1`, `f2`;  
- целевой признак: `product`;  
- данные разбиты на обучающую и валидационную выборки;  
- рассчитаны метрики качества (например, RMSE) на валидации;  
- скорректирована интерпретация ошибок с учётом масштабов целевого признака.

Выводы по моделям:

- качество моделей в регионах различается;  
- в одном из регионов модель показывает заметно большую ошибку прогноза, что повышает риск принятия неверного решения при выборе скважин;  
- в другом регионе прогнозы более стабильны, при этом средний ожидаемый объём добычи достаточно высок.

---

## Оценка прибыли

Для оценки экономической эффективности региона была реализована следующая схема:

1. Для каждого региона по модели рассчитываются прогнозы объёма добычи для всех скважин.  
2. Скважины сортируются по предсказанному значению `product`.  
3. Из всех доступных скважин выбирается заданное число лучших (например, 200) для разработки.  
4. Для выбранных скважин рассчитывается суммарная выручка с учётом фиксированной доходности за единицу продукта.  
5. Из выручки вычитаются затраты на бурение скважин и разработку региона.  
6. Получается оценка прибыли для каждого региона при выбранной стратегии.

Такой расчёт позволяет сравнить регионы не только по среднему уровню добычи, но и по экономическому эффекту.

---

## Бутстреп-анализ

Для учёта неопределённости использован бутстреп:

- для каждого региона многократно (например, 1000 раз) моделируется выборка скважин;  
- для каждой выборки выполняется тот же расчёт прибыли по выбранным лучшим скважинам;  
- по итоговому распределению прибыли считаются:  
  - средняя прибыль,  
  - доверительный интервал,  
  - доля случаев с отрицательной прибылью (риск убытка).

Это позволяет:

- оценить устойчивость прибыли;  
- сравнить регионы с точки зрения риска;  
- принять решение не только по средней прибыли, но и по вероятности убытков.

---

## Выбор региона

На основании:

- качества моделей;  
- средней ожидаемой прибыли;  
- доверительных интервалов прибыли;  
- вероятности убытка,

выбран регион, который:

- демонстрирует максимальную среднюю прибыль среди трёх;  
- имеет приемлемый уровень риска (вероятность убытка ниже заданного порога);  
- обеспечивает достаточно стабильный результат при многократном бутстреп-моделировании.

Итог: для разработки рекомендован один регион, в котором сочетание ожидаемой прибыли и риска наиболее выгодно для компании.

---

## Используемый стек

- **Python** — основной язык разработки  
- **pandas** — загрузка и обработка табличных данных  
- **NumPy** — численные расчёты, работа с массивами  
- **matplotlib**, **seaborn** — визуализация распределений, графики и диаграммы  
- **scikit-learn** — модели линейной регрессии, разбиение выборки, метрики качества  
- **PHIK / pingouin / другие библиотеки (при необходимости)** — расширенный анализ корреляций  
- встроенные средства Python — для расчёта прибыли и реализации бутстрепа

---

## Основные выводы

- Данные трёх регионов существенно различаются по распределению признаков и целевого значения.  
- Линейная регрессия позволяет получать достаточно точные прогнозы объёма добычи, однако качество моделей зависит от региона.  
- Оценка прибыли с учётом бюджета и количества скважин даёт более реалистичную картину, чем сравнение по средней добыче.  
- Бутстреп-анализ показал, что регионы с высокой средней прибылью могут иметь неприемлемо высокий риск убытков.  
- Выбран регион, в котором средняя прибыль максимальна при контролируемом уровне риска — его и рекомендуется к разработке.
